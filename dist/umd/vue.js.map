{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["/**\n *\n * @param {*} data 当前数据是否为对象\n */\nexport function isObject(data) {\n  return typeof data === 'object' && data !== null\n}","// 把data中的数据都用Object.defineProperty重新定义 es5\n// 不兼容ie8及以下\nimport { isObject } from '../util/index'\n\nclass Observer {\n  constructor(value) {\n    // vue如果数据层次过多 需要递归解析对象中属性， 依次增加set和get方法\n    // so vue3 -> proxy\n    this.copy(value)\n  }\n  copy(data) {\n    let keys = Object.keys(data) // [name, age, address]\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  observe(value) // 递归实现深度检测\n  Object.defineProperty(data, key, {\n    get() {\n      // 获取值的时候做一些事情\n      return value\n    },\n    set(newValue) {\n      // 设置值的时候做一些事情\n      if (newValue === value) {\n        return\n      }\n      console.log('值发生变化')\n      observe(newValue) // 继续劫持设置的值，cuz有可能设置的是一个对象\n      value = newValue\n    }\n  })\n}\n\nexport function observe(data) {\n  let isObj = isObject(data)\n  if (!isObj) {\n    return\n  }\n  return new Observer(data)\n}","import { observe } from './observer/index.js'\nexport function initState(vm) {\n  const opts = vm.$options\n  console.log(opts, '1123123')\n  // vue的数据来源 属性 方法 数据 计算属性 watch\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n} \n\nfunction initProps() {}\nfunction initMethods() {}\nfunction initData(vm) {\n  // 数据初始化工作\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n  // 对象劫持 用户改变了数据时得到通知->刷新页面\n  // MVVM 数据变化驱动视图变化\n  // Object.defineProperty() 给属性增加get方法和set方法\n  observe(data) // 响应式原理\n}\nfunction initComputed() {}\nfunction initWatch() {}","import { initState } from './state'\n// 在原型上添加一个init方法\nexport function initMixin(Vue) {\n  // 初始化流程\n  Vue.prototype._init = function (options) {\n    // 数据的劫持\n    const vm = this // vue中使用this.$options指代的就是用户传递的属性\n    vm.$options = options\n    // 初始化状态\n    initState(vm)\n  }\n}","import { initMixin } from './init'\nfunction Vue(options) {\n  // 进行Vue的初始化操作\n  this._init(options)\n}\ninitMixin(Vue)\nexport default Vue"],"names":["isObject","data","Observer","value","copy","keys","Object","forEach","key","defineReactive","observe","defineProperty","get","set","newValue","console","log","isObj","initState","vm","opts","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}